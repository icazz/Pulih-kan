import{q as D,s as L,a as b,b as V,d as e,u as s,h as M,t as f,e as v,z as P,i as r,v as x,F as k,j as S,x as C,y as w,J as B,o as c,k as y}from"./app-D2qwEyaT.js";import{L as u}from"./leaflet-src-BHe3LKqB.js";import{i as J,a as T}from"./marker-shadow-CG7pbA2w.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"min-h-screen w-full bg-gradient-to-b from-[#47622A] to-[#91C856] py-16 px-4 sm:px-6 lg:px-8 font-['Montserrat'] flex flex-col items-center"},z={class:"text-center mb-10"},R={class:"text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-md"},E={class:"text-white text-lg font-medium opacity-90"},K={class:"w-full max-w-5xl bg-[#FEF8DF] rounded-[3rem] shadow-2xl overflow-hidden"},I={class:"p-8 md:p-12"},O={key:0,class:"mb-8 p-4 bg-red-100 text-red-700 rounded-xl border border-red-200 flex items-start gap-3 animate-pulse"},G={class:"mb-12"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},q={class:"flex flex-col gap-2"},Z={class:"flex flex-col gap-2"},$={class:"flex flex-col gap-2 md:col-span-2"},H={class:"mb-12"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X=["onClick"],Y={key:0,class:"w-3 h-3 bg-[#973C00] rounded-sm"},ee={class:"font-medium select-none"},ae={key:0,class:"mt-6 transition-all duration-300"},te={class:"mb-10"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},oe={class:"space-y-2"},ie={class:"space-y-2"},ne={class:"space-y-2 md:col-span-2"},le={class:"bg-[#EBE5CB] -mx-8 md:-mx-12 -mb-8 md:-mb-12 p-8 md:p-12 rounded-t-[3rem] border-t border-[#DED4B0]"},re={class:"flex items-start gap-4 mb-10 bg-white/50 p-4 rounded-2xl border border-[#A89078]"},de={class:"flex items-center h-6"},ue=["disabled"],me={__name:"Register",props:{existingData:Object},setup(m){let j=u.icon({iconUrl:T,shadowUrl:J,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});u.Marker.prototype.options.icon=j;const n=m,t=D({nama_mitra:n.existingData?.nama_mitra||"",no_telepon:n.existingData?.no_telepon||"",email:n.existingData?.email||"",jenis_jasa:n.existingData?.jenis_jasa||[],jasa_lainnya:n.existingData?.jasa_lainnya||"",provinsi:n.existingData?.provinsi||"",kota:n.existingData?.kota||"",alamat:n.existingData?.alamat||"",latitude:n.existingData?.latitude||"",longitude:n.existingData?.longitude||"",agreement:!1}),A=["Saluran Air Rusak","Pembersihan Lumpur dan Puing","Instalasi Listrik Rusak","Atap Bocor / Rusak","Muncul Jamur dan Lembab","Lainnya"],_=l=>{const a=t.jenis_jasa.indexOf(l);a>-1?(t.jenis_jasa.splice(a,1),l==="Lainnya"&&(t.jasa_lainnya="")):t.jenis_jasa.push(l)},F=()=>{t.post(route("vendor.store"),{onBefore:()=>{Array.isArray(t.jenis_jasa)||(t.jenis_jasa=[t.jenis_jasa])},onSuccess:()=>{console.log("Pendaftaran Berhasil")},onError:l=>{console.error("Gagal mendaftar:",l),alert("Terjadi kesalahan, mohon periksa kembali data Anda.")}})};return L(()=>{const l=t.latitude||-6.2,a=t.longitude||106.816666,o=t.latitude?16:13,d=u.map("mapContainer").setView([l,a],o);u.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(d);let p;t.latitude&&t.longitude&&(p=u.marker([t.latitude,t.longitude]).addTo(d));const h=(i,g)=>{p?p.setLatLng([i,g]):p=u.marker([i,g]).addTo(d),d.setView([i,g],16),t.latitude=i,t.longitude=g};!t.latitude&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(i=>h(i.coords.latitude,i.coords.longitude),i=>console.warn("Geolocation error:",i.message)),d.on("click",i=>h(i.latlng.lat,i.latlng.lng))}),(l,a)=>(c(),b(k,null,[V(s(M),{title:"Daftar Sebagai Vendor"}),e("div",N,[e("div",z,[e("h1",R,f(m.existingData?"Perbaiki Data Mitra":"Selamat Datang!"),1),e("p",E,f(m.existingData?"Lengkapi data Anda agar dapat diverifikasi ulang":"Daftarkan diri Anda sebagai mitra layanan Pulih.kan"),1)]),e("div",K,[e("div",I,[m.existingData?.status==="rejected"?(c(),b("div",O,[...a[8]||(a[8]=[e("svg",{class:"w-6 h-6 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("div",null,[e("p",{class:"font-bold text-lg"},"Pendaftaran Sebelumnya Ditolak"),e("p",{class:"text-sm mt-1"},"Mohon perbaiki data Anda sesuai ketentuan yang berlaku, lalu ajukan kembali.")],-1)])])):v("",!0),e("form",{onSubmit:P(F,["prevent"])},[e("div",G,[a[12]||(a[12]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Data Identitas Vendor",-1)),e("div",W,[e("div",q,[a[9]||(a[9]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Nama Mitra",-1)),r(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>s(t).nama_mitra=o),type:"text",placeholder:"Masukkan Nama Lengkap / Brand",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[x,s(t).nama_mitra]])]),e("div",Z,[a[10]||(a[10]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Nomor Telepon (WhatsApp)",-1)),r(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>s(t).no_telepon=o),type:"tel",placeholder:"Contoh: 0812xxxx",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[x,s(t).no_telepon]])]),e("div",$,[a[11]||(a[11]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Email Aktif",-1)),r(e("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>s(t).email=o),type:"email",placeholder:"nama@email.com",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[x,s(t).email]])])])]),e("div",H,[a[14]||(a[14]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Jenis Jasa (Bisa pilih lebih dari satu)",-1)),e("div",Q,[(c(),b(k,null,S(A,(o,d)=>e("div",{key:d,onClick:p=>_(o),class:y(["cursor-pointer rounded-xl p-4 flex items-center gap-3 border transition-all duration-200 shadow-sm",s(t).jenis_jasa.includes(o)?"bg-[#973C00] border-[#973C00] text-white":"bg-white border-[#A89078] text-[#4F3726] hover:bg-gray-50"])},[e("div",{class:y(["w-5 h-5 rounded border flex items-center justify-center",s(t).jenis_jasa.includes(o)?"border-white bg-white":"border-[#4F3726]"])},[s(t).jenis_jasa.includes(o)?(c(),b("div",Y)):v("",!0)],2),e("span",ee,f(o),1)],10,X)),64))]),s(t).jenis_jasa.includes("Lainnya")?(c(),b("div",ae,[a[13]||(a[13]=e("label",{class:"text-[#4F3726] font-semibold text-sm mb-2 block"},"Sebutkan Jasa Lainnya:",-1)),r(e("textarea",{"onUpdate:modelValue":a[3]||(a[3]=o=>s(t).jasa_lainnya=o),placeholder:"Deskripsikan jasa Anda di sini...",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm h-24"},null,512),[[x,s(t).jasa_lainnya]])])):v("",!0)]),e("div",te,[a[20]||(a[20]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Area & Lokasi Kerja",-1)),e("div",se,[e("div",oe,[a[16]||(a[16]=e("label",{class:"text-[#4F3726] font-semibold text-sm"},"Provinsi",-1)),r(e("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>s(t).provinsi=o),class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none cursor-pointer"},[...a[15]||(a[15]=[e("option",{value:"",disabled:"",selected:""},"Pilih Provinsi",-1),e("option",{value:"jawa_timur"},"Jawa Timur",-1),e("option",{value:"jawa_tengah"},"Jawa Tengah",-1)])],512),[[w,s(t).provinsi]])]),e("div",ie,[a[18]||(a[18]=e("label",{class:"text-[#4F3726] font-semibold text-sm"},"Kecamatan / Kota",-1)),r(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>s(t).kota=o),class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none cursor-pointer"},[...a[17]||(a[17]=[e("option",{value:"",disabled:"",selected:""},"Pilih Kota",-1),e("option",{value:"lamongan"},"Lamongan",-1),e("option",{value:"surabaya"},"Surabaya",-1)])],512),[[w,s(t).kota]])]),e("div",ne,[a[19]||(a[19]=e("label",{class:"text-[#4F3726] font-semibold text-sm"},"Alamat Lengkap",-1)),r(e("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>s(t).alamat=o),type:"text",placeholder:"Jl. Nama Jalan, No. Rumah, RT/RW",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] shadow-sm focus:outline-none"},null,512),[[x,s(t).alamat]])])]),a[21]||(a[21]=C('<div class="mb-4" data-v-eef82249><h3 class="text-[#4F3726] font-bold mb-3 flex items-center gap-2" data-v-eef82249>Pilih Titik di Peta</h3><div id="mapContainer" class="w-full h-80 z-0 rounded-2xl overflow-hidden border border-[#A89078] shadow-md relative" data-v-eef82249><div class="absolute inset-0 flex items-center justify-center bg-gray-50 z-[-1]" data-v-eef82249><span class="text-gray-400" data-v-eef82249>Memuat Peta...</span></div></div></div>',1))]),e("div",le,[a[23]||(a[23]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6"},"Status & Persetujuan",-1)),e("div",re,[e("div",de,[r(e("input",{id:"agreement","onUpdate:modelValue":a[7]||(a[7]=o=>s(t).agreement=o),type:"checkbox",class:"w-6 h-6 border border-[#4F3726] rounded text-[#47622A] focus:ring-[#47622A] cursor-pointer"},null,512),[[B,s(t).agreement]])]),a[22]||(a[22]=e("label",{for:"agreement",class:"text-[#4F3726] text-sm font-medium leading-relaxed cursor-pointer"}," Saya menyatakan bahwa seluruh data yang saya berikan adalah benar dan bersedia mengikuti prosedur verifikasi mitra Pulih.kan. ",-1))]),e("button",{type:"submit",disabled:s(t).processing||!s(t).agreement,class:"w-full bg-[#4F3726] hover:bg-[#3a281c] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-5 px-6 rounded-2xl shadow-xl transition-all hover:scale-[1.01] text-lg mb-6"},f(s(t).processing?"Mengirim...":m.existingData?"Ajukan Kembali Verifikasi":"Kirim untuk Verifikasi"),9,ue),a[24]||(a[24]=e("div",{class:"text-center mb-10"},[e("p",{class:"text-[#4F3726] text-xs italic opacity-80 leading-relaxed max-w-2xl mx-auto"}," *Proses verifikasi manual membutuhkan waktu 1-3 hari kerja. Mohon pantau email atau halaman ini secara berkala. ")],-1))])],32)])])])],64))}},ge=U(me,[["__scopeId","data-v-eef82249"]]);export{ge as default};
