import{m as J,p as N,a as b,b as T,d as e,u as o,h as R,t as f,e as k,x as z,g as r,v as d,F as C,i as E,q as K,H as I,o as c,n as M}from"./app-CqGoo8t5.js";import{L as m,i as O,a as G}from"./marker-shadow-B0ynlELw.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"min-h-screen w-full bg-gradient-to-b from-[#47622A] to-[#91C856] py-16 px-4 sm:px-6 lg:px-8 font-['Montserrat'] flex flex-col items-center"},H={class:"text-center mb-10"},Z={class:"text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-md"},$={class:"text-white text-lg font-medium opacity-90"},Q={class:"w-full max-w-5xl bg-[#FEF8DF] rounded-[3rem] shadow-2xl overflow-hidden"},X={class:"p-8 md:p-12"},Y={key:0,class:"mb-8 p-4 bg-red-100 text-red-700 rounded-xl border border-red-200 flex items-start gap-3 animate-pulse"},ee={class:"mb-12"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"flex flex-col gap-2"},se={class:"flex flex-col gap-2"},oe={class:"flex flex-col gap-2 md:col-span-2"},ie={class:"mb-12"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le=["onClick"],re={key:0,class:"w-3 h-3 bg-[#973C00] rounded-sm"},de={class:"font-medium select-none"},ue={key:0,class:"mt-6 transition-all duration-300"},me={class:"mb-10"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},be={class:"space-y-2"},ce={class:"space-y-2"},xe={class:"space-y-2 md:col-span-2"},ge={class:"bg-[#EBE5CB] -mx-8 md:-mx-12 -mb-8 md:-mb-12 p-8 md:p-12 rounded-t-[3rem] border-t border-[#DED4B0]"},fe={class:"flex items-start gap-4 mb-10 bg-white/50 p-4 rounded-2xl border border-[#A89078]"},he={class:"flex items-center h-6"},ke=["disabled"],ve={__name:"Register",props:{existingData:Object},setup(p){var v,w,y,j,A,_,F,D,L,V;let S=m.icon({iconUrl:G,shadowUrl:O,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});m.Marker.prototype.options.icon=S;const n=p,a=J({nama_mitra:((v=n.existingData)==null?void 0:v.nama_mitra)||"",no_telepon:((w=n.existingData)==null?void 0:w.no_telepon)||"",email:((y=n.existingData)==null?void 0:y.email)||"",jenis_jasa:((j=n.existingData)==null?void 0:j.jenis_jasa)||[],jasa_lainnya:((A=n.existingData)==null?void 0:A.jasa_lainnya)||"",provinsi:((_=n.existingData)==null?void 0:_.provinsi)||"",kota:((F=n.existingData)==null?void 0:F.kota)||"",alamat:((D=n.existingData)==null?void 0:D.alamat)||"",latitude:((L=n.existingData)==null?void 0:L.latitude)||"",longitude:((V=n.existingData)==null?void 0:V.longitude)||"",agreement:!1}),P=["Saluran Air Rusak","Pembersihan Lumpur dan Puing","Instalasi Listrik Rusak","Atap Bocor / Rusak","Muncul Jamur dan Lembab","Lainnya"],B=l=>{const t=a.jenis_jasa.indexOf(l);t>-1?(a.jenis_jasa.splice(t,1),l==="Lainnya"&&(a.jasa_lainnya="")):a.jenis_jasa.push(l)},U=()=>{a.post(route("vendor.store"),{onBefore:()=>{Array.isArray(a.jenis_jasa)||(a.jenis_jasa=[a.jenis_jasa])},onSuccess:()=>{console.log("Pendaftaran Berhasil")},onError:l=>{console.error("Gagal mendaftar:",l),alert("Terjadi kesalahan, mohon periksa kembali data Anda.")}})};return N(()=>{const l=a.latitude||-6.2,t=a.longitude||106.816666,x=a.latitude?16:13,s=m.map("mapContainer").setView([l,t],x);m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(s);let u;a.latitude&&a.longitude&&(u=m.marker([a.latitude,a.longitude]).addTo(s));const h=(i,g)=>{u?u.setLatLng([i,g]):u=m.marker([i,g]).addTo(s),s.setView([i,g],16),a.latitude=i,a.longitude=g};!a.latitude&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(i=>h(i.coords.latitude,i.coords.longitude),i=>console.warn("Geolocation error:",i.message)),s.on("click",i=>h(i.latlng.lat,i.latlng.lng))}),(l,t)=>{var x;return c(),b(C,null,[T(o(R),{title:"Daftar Sebagai Vendor"}),e("div",q,[e("div",H,[e("h1",Z,f(p.existingData?"Perbaiki Data Mitra":"Selamat Datang!"),1),e("p",$,f(p.existingData?"Lengkapi data Anda agar dapat diverifikasi ulang":"Daftarkan diri Anda sebagai mitra layanan Pulih.kan"),1)]),e("div",Q,[e("div",X,[((x=p.existingData)==null?void 0:x.status)==="rejected"?(c(),b("div",Y,[...t[8]||(t[8]=[e("svg",{class:"w-6 h-6 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("div",null,[e("p",{class:"font-bold text-lg"},"Pendaftaran Sebelumnya Ditolak"),e("p",{class:"text-sm mt-1"},"Mohon perbaiki data Anda sesuai ketentuan yang berlaku, lalu ajukan kembali.")],-1)])])):k("",!0),e("form",{onSubmit:z(U,["prevent"])},[e("div",ee,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Data Identitas Vendor",-1)),e("div",te,[e("div",ae,[t[9]||(t[9]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Nama Mitra",-1)),r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(a).nama_mitra=s),type:"text",placeholder:"Masukkan Nama Lengkap / Brand",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[d,o(a).nama_mitra]])]),e("div",se,[t[10]||(t[10]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Nomor Telepon (WhatsApp)",-1)),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(a).no_telepon=s),type:"tel",placeholder:"Contoh: 0812xxxx",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[d,o(a).no_telepon]])]),e("div",oe,[t[11]||(t[11]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Email Aktif",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(a).email=s),type:"email",placeholder:"nama@email.com",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[d,o(a).email]])])])]),e("div",ie,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Jenis Jasa (Bisa pilih lebih dari satu)",-1)),e("div",ne,[(c(),b(C,null,E(P,(s,u)=>e("div",{key:u,onClick:h=>B(s),class:M(["cursor-pointer rounded-xl p-4 flex items-center gap-3 border transition-all duration-200 shadow-sm",o(a).jenis_jasa.includes(s)?"bg-[#973C00] border-[#973C00] text-white":"bg-white border-[#A89078] text-[#4F3726] hover:bg-gray-50"])},[e("div",{class:M(["w-5 h-5 rounded border flex items-center justify-center",o(a).jenis_jasa.includes(s)?"border-white bg-white":"border-[#4F3726]"])},[o(a).jenis_jasa.includes(s)?(c(),b("div",re)):k("",!0)],2),e("span",de,f(s),1)],10,le)),64))]),o(a).jenis_jasa.includes("Lainnya")?(c(),b("div",ue,[t[13]||(t[13]=e("label",{class:"text-[#4F3726] font-semibold text-sm mb-2 block"},"Sebutkan Jasa Lainnya:",-1)),r(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(a).jasa_lainnya=s),placeholder:"Deskripsikan jasa Anda di sini...",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm h-24"},null,512),[[d,o(a).jasa_lainnya]])])):k("",!0)]),e("div",me,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6 border-l-4 border-[#47622A] pl-4"},"Area & Lokasi Kerja",-1)),e("div",pe,[e("div",be,[t[15]||(t[15]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Provinsi",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(a).provinsi=s),type:"text",placeholder:"Contoh: Jawa Timur",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[d,o(a).provinsi]])]),e("div",ce,[t[16]||(t[16]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Kecamatan / Kota",-1)),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(a).kota=s),type:"text",placeholder:"Contoh: Surabaya",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] focus:outline-none shadow-sm"},null,512),[[d,o(a).kota]])]),e("div",xe,[t[17]||(t[17]=e("label",{class:"text-[#4F3726] font-semibold text-sm ml-1"},"Alamat Lengkap",-1)),r(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(a).alamat=s),type:"text",placeholder:"Jl. Nama Jalan, No. Rumah, RT/RW",class:"w-full bg-white border border-[#A89078] rounded-xl px-5 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#47622A] shadow-sm focus:outline-none"},null,512),[[d,o(a).alamat]])])]),t[19]||(t[19]=K('<div class="mb-4" data-v-8d15b15c><h3 class="text-[#4F3726] font-bold mb-3 flex items-center gap-2" data-v-8d15b15c>Pilih Titik di Peta</h3><div id="mapContainer" class="w-full h-80 z-0 rounded-2xl overflow-hidden border border-[#A89078] shadow-md relative" data-v-8d15b15c><div class="absolute inset-0 flex items-center justify-center bg-gray-50 z-[-1]" data-v-8d15b15c><span class="text-gray-400" data-v-8d15b15c>Memuat Peta...</span></div></div></div>',1))]),e("div",ge,[t[21]||(t[21]=e("h2",{class:"text-2xl font-bold text-[#4F3726] mb-6"},"Status & Persetujuan",-1)),e("div",fe,[e("div",he,[r(e("input",{id:"agreement","onUpdate:modelValue":t[7]||(t[7]=s=>o(a).agreement=s),type:"checkbox",class:"w-6 h-6 border border-[#4F3726] rounded text-[#47622A] focus:ring-[#47622A] cursor-pointer"},null,512),[[I,o(a).agreement]])]),t[20]||(t[20]=e("label",{for:"agreement",class:"text-[#4F3726] text-sm font-medium leading-relaxed cursor-pointer"}," Saya menyatakan bahwa seluruh data yang saya berikan adalah benar dan bersedia mengikuti prosedur verifikasi mitra Pulih.kan. ",-1))]),e("button",{type:"submit",disabled:o(a).processing||!o(a).agreement,class:"w-full bg-[#4F3726] hover:bg-[#3a281c] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-5 px-6 rounded-2xl shadow-xl transition-all hover:scale-[1.01] text-lg mb-6"},f(o(a).processing?"Mengirim...":p.existingData?"Ajukan Kembali Verifikasi":"Kirim untuk Verifikasi"),9,ke),t[22]||(t[22]=e("div",{class:"text-center mb-10"},[e("p",{class:"text-[#4F3726] text-xs italic opacity-80 leading-relaxed max-w-2xl mx-auto"}," *Proses verifikasi manual membutuhkan waktu 1-3 hari kerja. Mohon pantau email atau halaman ini secara berkala. ")],-1))])],32)])])])],64)}}},Ae=W(ve,[["__scopeId","data-v-8d15b15c"]]);export{Ae as default};
