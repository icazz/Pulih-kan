import{r as b,w as U,n as E,c as T,a as n,b as L,d as e,u as D,h as O,e as u,f as A,g as f,l as S,i as R,v as q,F as d,j as c,t as l,k as v,m as J,o as r,p as Q}from"./app-D2qwEyaT.js";import{L as y}from"./leaflet-src-BHe3LKqB.js";import{i as H,a as Y}from"./marker-shadow-CG7pbA2w.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"min-h-screen bg-[#FFFDF8] font-['Montserrat'] relative"},X={class:"absolute top-0 w-full flex justify-between items-center px-8 py-6 z-20"},Z={class:"max-w-6xl mx-auto px-6 mt-8 relative z-20"},ee=["placeholder"],te={class:"max-w-6xl mx-auto px-6 mt-10"},ae={class:"flex gap-8 border-b border-gray-200"},se=["onClick"],oe={key:0,class:"absolute bottom-0 left-0 w-full h-1 bg-[#BB4D00] rounded-full"},le={key:0,class:"max-w-6xl mx-auto px-6 py-8"},re={class:"flex gap-2 overflow-x-auto mb-6 pb-2"},ne=["onClick"],ie={key:0,class:"text-center py-20 text-gray-400 bg-white rounded-2xl border border-dashed border-gray-300"},de={class:"grid gap-4"},ue={class:"flex items-center gap-4"},ce={class:"font-bold text-gray-800 text-lg group-hover:text-[#BB4D00] transition"},pe={class:"text-sm text-gray-500"},xe={class:"flex flex-col items-end gap-1"},ge={class:"text-xs text-gray-400"},be={key:1,class:"max-w-6xl mx-auto px-6 py-8"},fe={class:"flex gap-2 overflow-x-auto mb-6 pb-2"},ve=["onClick"],he={key:0,class:"text-center py-20 text-gray-400 bg-white rounded-2xl border border-dashed border-gray-300"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye=["onClick"],we={class:"absolute top-0 right-0 p-2"},_e={class:"flex items-start gap-4"},ke={class:"w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center text-[#BB4D00] font-bold text-xl shadow-sm"},De={class:"flex-1"},Be={class:"font-bold text-gray-800 text-lg group-hover:text-[#BB4D00] transition"},je={class:"text-xs text-gray-500 mb-2"},Me={class:"flex flex-wrap gap-1"},Ce={class:"mt-4 pt-4 border-t border-gray-50 flex justify-between items-center"},Ve={class:"text-xs text-gray-400 italic"},Te={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"},Le={class:"bg-white w-full max-w-5xl rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-h-[90vh]"},Ae={class:"w-full md:w-1/2 bg-gray-100 relative min-h-[300px] md:h-auto"},Se={class:"absolute bottom-4 left-4 bg-white/90 backdrop-blur px-4 py-2 rounded-lg shadow-lg border border-white/50 z-[400] text-xs"},Pe={class:"font-mono text-gray-800"},Ne={class:"w-full md:w-1/2 flex flex-col bg-white h-full"},$e={class:"bg-[#4F3726] p-6 text-white flex justify-between items-center"},Fe={class:"p-8 overflow-y-auto flex-1 space-y-6"},Ie={class:"grid grid-cols-2 gap-6"},Ke={class:"font-bold text-gray-800 text-lg"},ze={class:"font-bold text-gray-800"},Ue={class:"text-xs text-gray-500"},Ee={class:"col-span-2"},Oe={class:"text-gray-700 text-sm leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},Re={class:"font-semibold text-gray-500"},qe={class:"col-span-2"},Je={class:"flex flex-wrap gap-2 mt-2"},Qe={key:0,class:"mt-2 text-xs text-gray-500 italic border-l-2 border-orange-200 pl-2"},He={key:0,class:"p-6 border-t border-gray-100 bg-gray-50 flex gap-3"},Ye={key:1,class:"p-6 border-t border-gray-100 bg-gray-50 text-center"},Ge={class:"text-gray-500 font-medium"},We={__name:"Dashboard",props:{reports:Array,vendors:Array,auth:Object},setup(P){let N=y.icon({iconUrl:Y,shadowUrl:H,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});y.Marker.prototype.options.icon=N;const B=P,p=b(""),x=b("Laporan User"),$=["Laporan User","Verifikasi Vendor"],F=["Semua","Menunggu Verifikasi","Menunggu Pembayaran","Dalam Pengerjaan","Selesai","Dibatalkan"],w=b("Semua"),I=["Menunggu","Terverifikasi","Ditolak"],h=b("Menunggu"),m=b(!1),o=b(null);let g=null;const K=(s,t,a)=>{g&&(g.remove(),g=null);const i=parseFloat(t)||-6.175392,_=parseFloat(a)||106.827153;g=y.map(s).setView([i,_],15),y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(g),y.marker([i,_]).addTo(g).bindPopup("Lokasi Terpilih").openPopup()},z=s=>{o.value=s,m.value=!0};U(m,s=>{s&&o.value&&E(()=>{K("vendorMap",o.value.latitude,o.value.longitude)})});const j=(s,t)=>{confirm(`Konfirmasi: Apakah Anda yakin ingin ${t==="approve"?"MENYETUJUI":"MENOLAK"} mitra ini?`)&&J.patch(`/admin/vendors/${s}/verify`,{status:t},{onSuccess:()=>{m.value=!1,o.value=null},preserveScroll:!0})},k=s=>{const t={verification:{label:"Perlu Verifikasi",class:"bg-red-100 text-red-600 border-red-200",tab:"Menunggu Verifikasi"},pending:{label:"Menunggu Pembayaran",class:"bg-orange-100 text-orange-600 border-orange-200",tab:"Menunggu Pembayaran"},process:{label:"Dalam Pengerjaan",class:"bg-blue-100 text-blue-600 border-blue-200",tab:"Dalam Pengerjaan"},completed:{label:"Selesai",class:"bg-green-100 text-green-600 border-green-200",tab:"Selesai"},cancelled:{label:"Dibatalkan",class:"bg-gray-100 text-gray-600 border-gray-200",tab:"Dibatalkan"}};return t[s]||t.verification},M=T(()=>{let s=B.reports;if(w.value!=="Semua"&&(s=s.filter(t=>k(t.status).tab===w.value)),p.value){const t=p.value.toLowerCase();s=s.filter(a=>a.title.toLowerCase().includes(t)||a.user_name.toLowerCase().includes(t))}return s}),C=T(()=>{let s=B.vendors||[];if(h.value==="Menunggu"?s=s.filter(t=>t.status==="pending"||!t.status&&!t.is_verified):h.value==="Terverifikasi"?s=s.filter(t=>t.status==="verified"||t.is_verified):h.value==="Ditolak"&&(s=s.filter(t=>t.status==="rejected")),p.value){const t=p.value.toLowerCase();s=s.filter(a=>a.nama_mitra.toLowerCase().includes(t)||a.email.toLowerCase().includes(t))}return s}),V=s=>s.status==="verified"||s.is_verified?{label:"Terverifikasi",class:"bg-green-100 text-green-700"}:s.status==="rejected"?{label:"Ditolak",class:"bg-red-100 text-red-700"}:{label:"Menunggu",class:"bg-yellow-100 text-yellow-700"};return(s,t)=>(r(),n(d,null,[L(D(O),{title:"Admin Dashboard"}),e("div",W,[e("nav",X,[t[5]||(t[5]=e("div",{class:"text-white font-bold text-xl uppercase tracking-wider"},"Pulih.kan Admin",-1)),L(D(S),{href:s.route("logout"),method:"post",as:"button",class:"text-white hover:text-gray-200 transition bg-white/20 px-6 py-2 rounded-full backdrop-blur-md font-semibold border border-white/30"},{default:A(()=>[...t[4]||(t[4]=[f(" Logout ",-1)])]),_:1},8,["href"])]),t[18]||(t[18]=e("div",{class:"w-full bg-[linear-gradient(to_bottom,#A0522D,#D2691E)] pt-32 pb-24 px-6 shadow-lg"},[e("div",{class:"max-w-6xl mx-auto"},[e("h1",{class:"text-4xl md:text-5xl font-bold text-white mb-3"},"Panel Kendali Admin"),e("p",{class:"text-white/90 text-lg"},"Kelola laporan kerusakan dan verifikasi kemitraan vendor.")])],-1)),e("div",Z,[R(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),type:"text",placeholder:x.value==="Laporan User"?"Cari ID Laporan atau Nama Klien...":"Cari Nama Mitra...",class:"w-full py-4 px-6 rounded-xl shadow-xl border-none focus:ring-2 focus:ring-[#BB4D00] text-gray-700 bg-white"},null,8,ee),[[q,p.value]])]),e("div",te,[e("div",ae,[(r(),n(d,null,c($,a=>e("button",{key:a,onClick:i=>x.value=a,class:v(["pb-4 text-lg font-bold transition-all relative",x.value===a?"text-[#BB4D00]":"text-gray-400 hover:text-gray-600"])},[f(l(a)+" ",1),x.value===a?(r(),n("div",oe)):u("",!0)],10,se)),64))])]),x.value==="Laporan User"?(r(),n("div",le,[e("div",re,[(r(),n(d,null,c(F,a=>e("button",{key:a,onClick:i=>w.value=a,class:v(["px-4 py-2 text-sm font-semibold rounded-full border transition-all whitespace-nowrap",w.value===a?"bg-[#BB4D00] text-white border-[#BB4D00]":"bg-white text-gray-500 border-gray-200 hover:border-[#BB4D00]"])},l(a),11,ne)),64))]),M.value.length===0?(r(),n("div",ie,"Tidak ada laporan ditemukan.")):u("",!0),e("div",de,[(r(!0),n(d,null,c(M.value,a=>(r(),Q(D(S),{key:a.id,href:s.route("admin.reports.show",a.id),class:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 flex items-center justify-between hover:shadow-md hover:border-orange-300 transition cursor-pointer group"},{default:A(()=>[e("div",ue,[t[6]||(t[6]=e("div",{class:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center text-[#BB4D00] group-hover:bg-[#BB4D00] group-hover:text-white transition shadow-inner"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",ce,l(a.title),1),e("p",pe,"Client: "+l(a.user_name)+" • ID: REQ-"+l(a.id),1)])]),e("div",xe,[e("span",{class:v(`px-3 py-1 rounded-full text-xs font-bold border ${k(a.status).class}`)},l(k(a.status).label),3),e("span",ge,l(a.date),1)])]),_:2},1032,["href"]))),128))])])):u("",!0),x.value==="Verifikasi Vendor"?(r(),n("div",be,[e("div",fe,[(r(),n(d,null,c(I,a=>e("button",{key:a,onClick:i=>h.value=a,class:v(["px-4 py-2 text-sm font-semibold rounded-full border transition-all whitespace-nowrap",h.value===a?"bg-[#BB4D00] text-white border-[#BB4D00]":"bg-white text-gray-500 border-gray-200 hover:border-[#BB4D00]"])},l(a),11,ve)),64))]),C.value.length===0?(r(),n("div",he,"Tidak ada pengajuan vendor baru.")):u("",!0),e("div",me,[(r(!0),n(d,null,c(C.value,a=>(r(),n("div",{key:a.id,onClick:i=>z(a),class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:border-orange-300 transition-all cursor-pointer relative overflow-hidden group"},[e("div",we,[e("span",{class:v(`text-[10px] font-black px-2 py-1 rounded-bl-xl uppercase tracking-tighter ${V(a).class}`)},l(V(a).label),3)]),e("div",_e,[e("div",ke,l(a.nama_mitra.charAt(0)),1),e("div",De,[e("h3",Be,l(a.nama_mitra),1),e("p",je,l(a.email),1),e("div",Me,[(r(!0),n(d,null,c(a.jenis_jasa.slice(0,3),(i,_)=>(r(),n("span",{key:_,class:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded"},l(i),1))),128))])])]),e("div",Ce,[e("span",Ve,l(a.kota),1),t[7]||(t[7]=e("span",{class:"text-[#BB4D00] font-bold text-xs flex items-center gap-1"},[f("Detail & Peta "),e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 5l7 7-7 7"})])],-1))])],8,ye))),128))])])):u("",!0),m.value&&o.value?(r(),n("div",Te,[e("div",Le,[e("div",Ae,[t[9]||(t[9]=e("div",{id:"vendorMap",class:"w-full h-full z-0"},null,-1)),e("div",Se,[t[8]||(t[8]=e("span",{class:"font-bold text-gray-500 block"},"KOORDINAT",-1)),e("span",Pe,l(o.value.latitude)+", "+l(o.value.longitude),1)])]),e("div",Ne,[e("div",$e,[t[10]||(t[10]=e("div",null,[e("h2",{class:"text-xl font-bold"},"Verifikasi Kemitraan"),e("p",{class:"text-white/70 text-sm"},"Tinjau kelengkapan data sebelum menyetujui.")],-1)),e("button",{onClick:t[1]||(t[1]=a=>m.value=!1),class:"text-white/50 hover:text-white text-3xl"},"×")]),e("div",Fe,[e("div",Ie,[e("div",null,[t[11]||(t[11]=e("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Nama Mitra",-1)),e("p",Ke,l(o.value.nama_mitra),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Kontak",-1)),e("p",ze,l(o.value.no_telepon),1),e("p",Ue,l(o.value.email),1)]),e("div",Ee,[t[14]||(t[14]=e("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Alamat Lengkap",-1)),e("p",Oe,[f(l(o.value.alamat),1),t[13]||(t[13]=e("br",null,null,-1)),e("span",Re,l(o.value.kota)+", "+l(o.value.provinsi),1)])]),e("div",qe,[t[15]||(t[15]=e("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Jasa / Layanan",-1)),e("div",Je,[(r(!0),n(d,null,c(o.value.jenis_jasa,a=>(r(),n("span",{key:a,class:"bg-orange-50 text-[#BB4D00] border border-orange-100 px-3 py-1 rounded-full text-xs font-bold"},l(a),1))),128))]),o.value.jasa_lainnya?(r(),n("p",Qe,' Note: "'+l(o.value.jasa_lainnya)+'" ',1)):u("",!0)])])]),o.value.status==="pending"||!o.value.status&&!o.value.is_verified?(r(),n("div",He,[e("button",{onClick:t[2]||(t[2]=a=>j(o.value.id,"reject")),class:"px-6 py-3 rounded-xl font-bold text-red-600 bg-white border border-red-200 hover:bg-red-50 transition"}," Tolak "),e("button",{onClick:t[3]||(t[3]=a=>j(o.value.id,"approve")),class:"flex-1 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition shadow-lg shadow-green-200 flex items-center justify-center gap-2"},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" Setujui & Aktifkan Akun ",-1)])])])):(r(),n("div",Ye,[e("p",Ge,[t[17]||(t[17]=f(" Mitra ini telah diproses dengan status: ",-1)),e("span",{class:v(["font-bold uppercase",o.value.status==="verified"||o.value.is_verified?"text-green-600":"text-red-600"])},l(o.value.status==="verified"||o.value.is_verified?"TERVERIFIKASI":"DITOLAK"),3)])]))])])])):u("",!0)])],64))}},at=G(We,[["__scopeId","data-v-02c12789"]]);export{at as default};
