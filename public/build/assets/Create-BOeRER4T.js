import{r as L,q as _,s as j,n as V,a as g,b,d as e,u as s,h as S,x as T,k as d,i as r,C as x,v as u,y as f,g as M,F as v,j as z,t as h,o as c,e as P}from"./app-D2qwEyaT.js";import{_ as E}from"./Navbar-C0O0JlmN.js";import{L as m}from"./leaflet-src-BHe3LKqB.js";import{i as K,a as U}from"./marker-shadow-CG7pbA2w.js";const R={class:"min-h-screen bg-[#FFFFFA] font-['Montserrat'] pb-20"},J={class:"max-w-5xl mx-auto mt-12 mb-16 px-6"},N={class:"flex items-center justify-between relative w-full max-w-2xl mx-auto"},$={class:"relative z-10 bg-[#FFFFFA] px-3"},G={class:"relative z-10 bg-[#FFFFFA] px-3"},I={class:"max-w-5xl mx-auto px-6"},H={class:"mb-6"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},Z=["onClick"],Q={class:"w-5 h-5 rounded border border-[#973C00] flex items-center justify-center bg-white"},W={key:0,class:"w-3 h-3 bg-[#973C00] rounded-sm"},X={class:"text-[#4F3726] font-medium select-none"},Y={class:"mb-8"},ee={class:"relative"},te={class:"mb-10"},oe={class:"flex justify-between items-center mt-12"},ae=["disabled"],ue={__name:"Create",setup(se){let k=m.icon({iconUrl:U,shadowUrl:K,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});m.Marker.prototype.options.icon=k;const i=L(1),o=_({title:"",provinsi:"",kota:"",alamat:"",location:"",house_size:"",latitude:"",longitude:"",damage_types:[],drive_link:"",deskripsi:""}),w=["Saluran Air Rusak","Pembersihan Lumpur dan Puing","Instalasi Listrik Rusak","Atap Bocor / Rusak","Muncul Jamur dan Lembab","Lainnya"],y=l=>{o.damage_types.includes(l)?o.damage_types=o.damage_types.filter(t=>t!==l):o.damage_types.push(l)},C=()=>{if(i.value===1){if(!o.title||!o.alamat||!o.provinsi||!o.kota||!o.latitude){alert("Mohon lengkapi judul, data rumah, dan pilih titik lokasi di peta.");return}i.value++,window.scrollTo({top:0,behavior:"smooth"})}},F=()=>{i.value>1&&(i.value--,window.scrollTo({top:0,behavior:"smooth"}))},B=()=>{if(o.damage_types.length===0||!o.deskripsi||!o.drive_link){alert("Mohon lengkapi kerusakan, deskripsi, dan Link Google Drive.");return}o.location=`${o.alamat}, ${o.kota}, ${o.provinsi}`,o.post(route("reports.store"),{onSuccess:()=>{},onError:l=>{console.error("Error submit:",l),alert("Gagal mengirim laporan. Cek kembali isian Anda.")}})};j(()=>{i.value===1&&V(()=>{setTimeout(D,500)})});let n,p;const D=()=>{if(!document.getElementById("mapContainer")||n)return;n=m.map("mapContainer").setView([-6.2,106.816666],13),m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap",maxZoom:19}).addTo(n);const l=(t,a)=>{p?p.setLatLng([t,a]):p=m.marker([t,a]).addTo(n),n.setView([t,a],16),o.latitude=t,o.longitude=a};navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{l(t.coords.latitude,t.coords.longitude)}),n.on("click",t=>l(t.latlng.lat,t.latlng.lng))};return(l,t)=>(c(),g(v,null,[b(s(S),{title:"Pengajuan Pemulihan Rumah"}),b(E),e("div",R,[t[21]||(t[21]=T('<div class="w-full bg-gradient-to-r from-[#28160A] via-[#000000] to-[#2D190D] pt-32 pb-16 shadow-lg"><div class="max-w-5xl mx-auto px-6"><h1 class="text-3xl md:text-5xl font-bold text-[#FFEBDE] mb-3 leading-tight"> Pengajuan <br class="md:hidden"> Perbaikan Rumah </h1><p class="text-white text-base md:text-lg opacity-90 font-light"> Lengkapi data untuk mendapatkan perbaikan </p></div></div>',1)),e("div",J,[e("div",N,[t[7]||(t[7]=e("div",{class:"absolute top-1/2 left-0 w-full h-[4px] bg-[#D6C5BA] z-0 transform -translate-y-1/2 rounded-full"},null,-1)),e("div",$,[e("div",{class:d(["w-16 h-16 rounded-full flex items-center justify-center border-[3px] transition-all duration-300 shadow-sm",i.value===1?"bg-[#973C00] border-[#973C00]":"bg-[#D6C5BA] border-[#D6C5BA]"])},[e("img",{src:"/images/step-1-home.png",class:d(["w-8 h-8 object-contain brightness-0 invert",i.value===1?"opacity-100":"opacity-60"])},null,2)],2)]),e("div",G,[e("div",{class:d(["w-16 h-16 rounded-full flex items-center justify-center border-[3px] transition-all duration-300 shadow-sm",i.value===2?"bg-[#973C00] border-[#973C00]":"bg-[#D6C5BA] border-[#D6C5BA]"])},[e("img",{src:"/images/step-2-alert.png",class:d(["w-8 h-8 object-contain brightness-0 invert",i.value===2?"opacity-100":"opacity-60"])},null,2)],2)]),t[8]||(t[8]=e("div",{class:"relative z-10 bg-[#FFFFFA] px-3"},[e("div",{class:"w-16 h-16 rounded-full flex items-center justify-center border-[3px] transition-all duration-300 shadow-sm bg-[#D6C5BA] border-[#D6C5BA]"},[e("img",{src:"/images/step-3-file.png",class:"w-8 h-8 object-contain brightness-0 invert opacity-60"})])],-1))])]),e("div",I,[r(e("div",null,[t[13]||(t[13]=e("h2",{class:"text-2xl font-bold text-black mb-6"},"Data Rumah",-1)),e("div",H,[t[9]||(t[9]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Judul Laporan",-1)),r(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s(o).title=a),placeholder:"Contoh: Atap Roboh Bagian Dapur",class:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:ring-2 focus:ring-[#973C00] shadow-sm"},null,512),[[u,s(o).title]])]),e("div",q,[e("div",null,[r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(o).provinsi=a),class:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:ring-2 focus:ring-[#973C00] shadow-sm cursor-pointer"},[...t[10]||(t[10]=[e("option",{value:"",disabled:"",selected:""},"Provinsi",-1),e("option",{value:"Jawa Timur"},"Jawa Timur",-1),e("option",{value:"Jawa Tengah"},"Jawa Tengah",-1)])],512),[[f,s(o).provinsi]])]),e("div",null,[r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(o).kota=a),class:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:ring-2 focus:ring-[#973C00] shadow-sm cursor-pointer"},[...t[11]||(t[11]=[e("option",{value:"",disabled:"",selected:""},"Kecamatan / Kota",-1),e("option",{value:"Lamongan"},"Lamongan",-1),e("option",{value:"Surabaya"},"Surabaya",-1)])],512),[[f,s(o).kota]])]),e("div",null,[r(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>s(o).alamat=a),placeholder:"Alamat Lengkap",class:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:ring-2 focus:ring-[#973C00] shadow-sm"},null,512),[[u,s(o).alamat]])]),e("div",null,[r(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=a=>s(o).house_size=a),placeholder:"Luas Rumah (mÂ²)",class:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:ring-2 focus:ring-[#973C00] shadow-sm"},null,512),[[u,s(o).house_size]])])]),t[14]||(t[14]=e("div",{class:"mb-8"},[e("h3",{class:"text-[#4F3726] font-bold mb-3 flex items-center gap-2"},"Pilih Titik di Peta"),e("div",{id:"mapContainer",class:"w-full h-64 md:h-80 rounded-2xl overflow-hidden border border-gray-300 shadow-md relative z-0"})],-1)),e("div",{class:"flex justify-end mt-12"},[e("button",{onClick:C,class:"px-8 py-3 rounded-full text-white font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all flex items-center gap-2 bg-gradient-to-r from-[#552300] to-[#BB4D00]"},[...t[12]||(t[12]=[M(" Lanjutkan ",-1),e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)])])])],512),[[x,i.value===1]]),r(e("div",null,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-black mb-6"},"Kondisi Kerusakan",-1)),e("div",O,[(c(),g(v,null,z(w,(a,A)=>e("div",{key:A,onClick:ie=>y(a),class:d(["cursor-pointer rounded-xl p-4 flex items-center gap-3 border transition-all duration-200",s(o).damage_types.includes(a)?"bg-[#FFFBEE] border-[#973C00] shadow-md":"bg-[#FFFBEE] border-[#973C00] hover:shadow-sm"])},[e("div",Q,[s(o).damage_types.includes(a)?(c(),g("div",W)):P("",!0)]),e("span",X,h(a),1)],10,Z)),64))]),e("div",Y,[t[16]||(t[16]=e("label",{class:"block text-[#716363] text-lg mb-2 font-medium"}," Link Folder Google Drive (Foto/Video Bukti) ",-1)),e("div",ee,[t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])],-1)),r(e("input",{type:"url","onUpdate:modelValue":t[5]||(t[5]=a=>s(o).drive_link=a),class:"w-full bg-white border border-[#973C00] rounded-xl pl-10 pr-4 py-3 text-[#4F3726] focus:ring-2 focus:ring-[#973C00] shadow-sm placeholder-gray-400",placeholder:"https://drive.google.com/drive/folders/..."},null,512),[[u,s(o).drive_link]])]),t[17]||(t[17]=e("p",{class:"text-sm text-gray-500 mt-2"},'*Pastikan akses link sudah "Anyone with the link".',-1))]),e("div",te,[t[18]||(t[18]=e("label",{class:"block text-[#716363] text-lg mb-2 font-medium"},"Deskripsikan Kerusakan secara Detail",-1)),r(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>s(o).deskripsi=a),rows:"5",class:"w-full bg-white border border-[#973C00] rounded-xl p-4 text-[#4F3726] focus:ring-2 focus:ring-[#973C00] shadow-sm",placeholder:"Contoh: Tembok ruang tamu retak parah..."},null,512),[[u,s(o).deskripsi]]),t[19]||(t[19]=e("p",{class:"text-sm text-gray-500 mt-2"},"*Hasil verifikasi akan diberikan maksimal dalam waktu 1 x 48 jam .",-1))]),e("div",oe,[e("button",{onClick:F,class:"flex items-center gap-2 text-[#696565] font-semibold hover:text-[#4F3726] transition"},"Kembali"),e("button",{onClick:B,disabled:s(o).processing,class:"px-8 py-3 rounded-full text-white font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all flex items-center gap-2 bg-gradient-to-r from-[#552300] to-[#BB4D00]"},h(s(o).processing?"Mengirim...":"Verifikasi & Kirim"),9,ae)])],512),[[x,i.value===2]])])])],64))}};export{ue as default};
