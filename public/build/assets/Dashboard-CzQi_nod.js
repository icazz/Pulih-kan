import{r as i,c as w,a as l,b as P,d as e,u as k,h as E,e as n,w as S,f as v,l as $,g as q,v as Q,F as d,i as g,t as o,o as r,n as p,j as G,k as A}from"./app-56kQ6enK.js";const H={class:"min-h-screen bg-[#FFFDF8] font-['Montserrat'] relative"},J={class:"absolute top-0 w-full flex justify-between items-center px-8 py-6 z-20"},O={class:"max-w-6xl mx-auto px-6 mt-8 relative z-20"},W=["placeholder"],X={class:"max-w-6xl mx-auto px-6 mt-10"},Y={class:"flex gap-8 border-b border-gray-200"},Z=["onClick"],ee={key:0,class:"absolute bottom-0 left-0 w-full h-1 bg-[#BB4D00] rounded-full"},te={key:0,class:"max-w-6xl mx-auto px-6 py-8"},se={class:"flex gap-2 overflow-x-auto mb-6 pb-2"},ae=["onClick"],oe={key:0,class:"text-center py-20 text-gray-400 bg-white rounded-2xl border border-dashed border-gray-300"},re={class:"grid gap-4"},le={class:"flex items-center gap-4"},ne={class:"font-bold text-gray-800 text-lg group-hover:text-[#BB4D00] transition"},ie={class:"text-sm text-gray-500"},de={class:"flex flex-col items-end gap-1"},ue={class:"text-xs text-gray-400"},ce={key:1,class:"max-w-6xl mx-auto px-6 py-8"},xe={class:"flex gap-2 overflow-x-auto mb-6 pb-2"},ge=["onClick"],pe={key:0,class:"text-center py-20 text-gray-400 bg-white rounded-2xl border border-dashed border-gray-300"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he=["onClick"],fe={class:"absolute top-0 right-0 p-2"},ve={class:"flex items-start gap-4"},_e={class:"w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center text-[#BB4D00] font-bold text-xl shadow-sm"},me={class:"flex-1"},ye={class:"font-bold text-gray-800 text-lg group-hover:text-[#BB4D00] transition"},we={class:"text-xs text-gray-500 mb-2"},ke={class:"flex flex-wrap gap-1"},De={class:"mt-4 pt-4 border-t border-gray-50 flex justify-between items-center"},Be={class:"text-xs text-gray-400 italic"},Ce={key:2,class:"max-w-7xl mx-auto px-6 py-8"},je={key:0,class:"text-center py-20 text-gray-400 bg-white rounded-2xl border border-dashed border-gray-300"},Me={key:1,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Le={class:"overflow-x-auto"},Ve={class:"w-full text-left border-collapse"},Te={class:"divide-y divide-gray-100 text-sm"},Pe={class:"p-4 align-top"},Se={class:"flex gap-3"},$e={class:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-[#BB4D00] font-bold shrink-0"},Ae={class:"font-bold text-gray-900 text-base"},Ne={class:"text-gray-500"},Re={class:"p-4 align-top"},Fe={class:"space-y-2"},Ue={class:"font-medium text-gray-700"},Ie={class:"font-medium text-red-600"},Ke={class:"p-4 align-top"},ze={class:"mb-2"},Ee={class:"inline-block px-2 py-1 bg-orange-50 text-[#BB4D00] rounded text-xs font-bold border border-orange-100"},qe={class:"text-gray-600 text-xs leading-relaxed max-w-[250px]"},Qe={class:"p-4 align-top"},Ge={class:"text-gray-800 font-medium mb-1"},He={class:"text-gray-500 text-xs"},Je={class:"p-4 align-top text-center"},Oe={key:3,class:"max-w-6xl mx-auto px-6 py-8"},We={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Xe={class:"w-full text-left"},Ye={class:"divide-y text-sm"},Ze={class:"p-4 font-bold"},et={class:"text-xs text-gray-400 font-normal"},tt={class:"p-4 font-bold text-[#BB4D00]"},st={class:"p-4 text-center"},at=["onClick"],ot={class:"p-4 text-center"},rt={class:"p-4 text-right flex justify-end gap-2"},lt=["onClick"],nt=["onClick"],it=["src"],ut={__name:"Dashboard",props:{reports:Array,vendors:Array,volunteers:Array,donations:Array,auth:Object},setup(D){const _=D,u=i(""),c=i("Laporan User"),N=["Laporan User","Verifikasi Vendor","Relawan","Donasi"],m=i(!1),B=i(""),R=a=>{B.value=a,m.value=!0},C=(a,s)=>{confirm(`Ubah status menjadi ${s}?`)&&A.patch(`/admin/donations/${a}`,{status:s},{preserveScroll:!0,onSuccess:()=>{alert("Status donasi berhasil diperbarui!")},onError:t=>{console.error("Gagal update donasi:",t)}})},F=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a),h=i("Menunggu"),j=a=>a==="verified"?{label:"Terverifikasi",class:"bg-green-100 text-green-700"}:a==="rejected"?{label:"Ditolak",class:"bg-red-100 text-red-700"}:{label:"Menunggu",class:"bg-yellow-100 text-yellow-700"},M=w(()=>{let a=_.volunteers||[];if(h.value==="Menunggu"?a=a.filter(s=>s.status==="pending"):h.value==="Terverifikasi"?a=a.filter(s=>s.status==="verified"):h.value==="Ditolak"&&(a=a.filter(s=>s.status==="rejected")),u.value){const s=u.value.toLowerCase();a=a.filter(t=>t.name.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.role.toLowerCase().includes(s))}return a});i(!1),i(null);const U=["Semua","Menunggu Verifikasi","Menunggu Pembayaran","Dalam Pengerjaan","Selesai","Dibatalkan"],f=i("Semua"),I=["Menunggu","Terverifikasi","Ditolak"],b=i("Menunggu"),y=a=>{const s={verification:{label:"Perlu Verifikasi",class:"bg-red-100 text-red-600 border-red-200",tab:"Menunggu Verifikasi"},pending:{label:"Menunggu Pembayaran",class:"bg-orange-100 text-orange-600 border-orange-200",tab:"Menunggu Pembayaran"},process:{label:"Dalam Pengerjaan",class:"bg-blue-100 text-blue-600 border-blue-200",tab:"Dalam Pengerjaan"},completed:{label:"Selesai",class:"bg-green-100 text-green-600 border-green-200",tab:"Selesai"},cancelled:{label:"Dibatalkan",class:"bg-gray-100 text-gray-600 border-gray-200",tab:"Dibatalkan"}};return s[a]||s.verification},L=a=>a.status==="verified"||a.is_verified?{label:"Terverifikasi",class:"bg-green-100 text-green-700"}:a.status==="rejected"?{label:"Ditolak",class:"bg-red-100 text-red-700"}:{label:"Menunggu",class:"bg-yellow-100 text-yellow-700"},V=w(()=>{let a=_.reports;if(f.value!=="Semua"&&(a=a.filter(s=>y(s.status).tab===f.value)),u.value){const s=u.value.toLowerCase();a=a.filter(t=>t.title.toLowerCase().includes(s)||t.user_name.toLowerCase().includes(s))}return a}),T=w(()=>{let a=_.vendors||[];if(b.value==="Menunggu"?a=a.filter(s=>s.status==="pending"||!s.status&&!s.is_verified):b.value==="Terverifikasi"?a=a.filter(s=>s.status==="verified"||s.is_verified):b.value==="Ditolak"&&(a=a.filter(s=>s.status==="rejected")),u.value){const s=u.value.toLowerCase();a=a.filter(t=>t.nama_mitra.toLowerCase().includes(s)||t.email.toLowerCase().includes(s))}return a}),K=a=>{A.visit(route("admin.vendors.show",a))};return(a,s)=>(r(),l(d,null,[P(k(E),{title:"Admin Dashboard"}),e("div",H,[e("nav",J,[s[3]||(s[3]=e("div",{class:"text-white font-bold text-xl uppercase tracking-wider"},"Pulih.kan Admin",-1)),P(k($),{href:a.route("logout"),method:"post",as:"button",class:"text-white hover:text-gray-200 transition bg-white/20 px-6 py-2 rounded-full backdrop-blur-md font-semibold border border-white/30"},{default:S(()=>[...s[2]||(s[2]=[v(" Logout ",-1)])]),_:1},8,["href"])]),s[13]||(s[13]=e("div",{class:"w-full bg-[linear-gradient(to_bottom,#A0522D,#D2691E)] pt-32 pb-24 px-6 shadow-lg"},[e("div",{class:"max-w-6xl mx-auto"},[e("h1",{class:"text-4xl md:text-5xl font-bold text-white mb-3"},"Panel Kendali Admin"),e("p",{class:"text-white/90 text-lg"},"Kelola laporan kerusakan dan verifikasi kemitraan vendor.")])],-1)),e("div",O,[q(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),type:"text",placeholder:c.value==="Laporan User"?"Cari ID Laporan atau Nama Klien...":"Cari Nama Mitra...",class:"w-full py-4 px-6 rounded-xl shadow-xl border-none focus:ring-2 focus:ring-[#BB4D00] text-gray-700 bg-white"},null,8,W),[[Q,u.value]])]),e("div",X,[e("div",Y,[(r(),l(d,null,g(N,t=>e("button",{key:t,onClick:x=>c.value=t,class:p(["pb-4 text-lg font-bold transition-all relative",c.value===t?"text-[#BB4D00]":"text-gray-400 hover:text-gray-600"])},[v(o(t)+" ",1),c.value===t?(r(),l("div",ee)):n("",!0)],10,Z)),64))])]),c.value==="Laporan User"?(r(),l("div",te,[e("div",se,[(r(),l(d,null,g(U,t=>e("button",{key:t,onClick:x=>f.value=t,class:p(["px-4 py-2 text-sm font-semibold rounded-full border transition-all whitespace-nowrap",f.value===t?"bg-[#BB4D00] text-white border-[#BB4D00]":"bg-white text-gray-500 border-gray-200 hover:border-[#BB4D00]"])},o(t),11,ae)),64))]),V.value.length===0?(r(),l("div",oe,"Tidak ada laporan ditemukan.")):n("",!0),e("div",re,[(r(!0),l(d,null,g(V.value,t=>(r(),G(k($),{key:t.id,href:a.route("admin.reports.show",t.id),class:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 flex items-center justify-between hover:shadow-md hover:border-orange-300 transition cursor-pointer group"},{default:S(()=>[e("div",le,[s[4]||(s[4]=e("div",{class:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center text-[#BB4D00] group-hover:bg-[#BB4D00] group-hover:text-white transition shadow-inner"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[e("h3",ne,o(t.title),1),e("p",ie,"Client: "+o(t.user_name)+" â€¢ ID: REQ-"+o(t.id),1)])]),e("div",de,[e("span",{class:p(`px-3 py-1 rounded-full text-xs font-bold border ${y(t.status).class}`)},o(y(t.status).label),3),e("span",ue,o(t.date),1)])]),_:2},1032,["href"]))),128))])])):n("",!0),c.value==="Verifikasi Vendor"?(r(),l("div",ce,[e("div",xe,[(r(),l(d,null,g(I,t=>e("button",{key:t,onClick:x=>b.value=t,class:p(["px-4 py-2 text-sm font-semibold rounded-full border transition-all whitespace-nowrap",b.value===t?"bg-[#BB4D00] text-white border-[#BB4D00]":"bg-white text-gray-500 border-gray-200 hover:border-[#BB4D00]"])},o(t),11,ge)),64))]),T.value.length===0?(r(),l("div",pe,"Tidak ada pengajuan vendor baru.")):n("",!0),e("div",be,[(r(!0),l(d,null,g(T.value,t=>(r(),l("div",{key:t.id,onClick:x=>K(t.id),class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:border-orange-300 transition-all cursor-pointer relative overflow-hidden group"},[e("div",fe,[e("span",{class:p(`text-[10px] font-black px-2 py-1 rounded-bl-xl uppercase tracking-tighter ${L(t).class}`)},o(L(t).label),3)]),e("div",ve,[e("div",_e,o(t.nama_mitra.charAt(0)),1),e("div",me,[e("h3",ye,o(t.nama_mitra),1),e("p",we,o(t.email),1),e("div",ke,[(r(!0),l(d,null,g(t.jenis_jasa.slice(0,3),(x,z)=>(r(),l("span",{key:z,class:"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded"},o(x),1))),128))])])]),e("div",De,[e("span",Be,o(t.kota),1),s[5]||(s[5]=e("span",{class:"text-[#BB4D00] font-bold text-xs flex items-center gap-1"},[v("Detail & Peta "),e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 5l7 7-7 7"})])],-1))])],8,he))),128))])])):n("",!0),c.value==="Relawan"?(r(),l("div",Ce,[M.value.length===0?(r(),l("div",je," Tidak ada data relawan "+o(h.value.toLowerCase())+". ",1)):(r(),l("div",Me,[e("div",Le,[e("table",Ve,[s[8]||(s[8]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-bold"},[e("th",{class:"p-4 min-w-[250px]"},"Profil Relawan"),e("th",{class:"p-4 min-w-[200px]"},"Kontak"),e("th",{class:"p-4 min-w-[200px]"},"Peran & Keahlian"),e("th",{class:"p-4 min-w-[250px]"},"Alamat Domisili"),e("th",{class:"p-4 text-center"},"Status")])],-1)),e("tbody",Te,[(r(!0),l(d,null,g(M.value,t=>(r(),l("tr",{key:t.id,class:"hover:bg-orange-50/30 transition"},[e("td",Pe,[e("div",Se,[e("div",$e,o(t.name.charAt(0)),1),e("div",null,[e("p",Ae,o(t.name),1),e("p",Ne,o(t.email),1)])])]),e("td",Re,[e("div",Fe,[e("div",null,[s[6]||(s[6]=e("p",{class:"text-[10px] text-gray-400 uppercase font-bold"},"Pribadi",-1)),e("p",Ue,o(t.phone),1)]),e("div",null,[s[7]||(s[7]=e("p",{class:"text-[10px] text-gray-400 uppercase font-bold"},"Darurat",-1)),e("p",Ie,o(t.emergency_contact),1)])])]),e("td",Ke,[e("div",ze,[e("span",Ee,o(t.role),1)]),e("p",qe,o(t.experience),1)]),e("td",Qe,[e("p",Ge,o(t.address),1),e("p",He,o(t.city)+", "+o(t.province),1)]),e("td",Je,[e("span",{class:p(`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(t.status).class}`)},o(j(t.status).label),3)])]))),128))])])])]))])):n("",!0),c.value==="Donasi"?(r(),l("div",Oe,[e("div",We,[e("table",Xe,[s[12]||(s[12]=e("thead",{class:"bg-gray-50 text-xs uppercase text-gray-500 font-bold border-b"},[e("tr",null,[e("th",{class:"p-4"},"Nama Donatur"),e("th",{class:"p-4"},"Jumlah"),e("th",{class:"p-4 text-center"},"Bukti"),e("th",{class:"p-4 text-center"},"Status"),e("th",{class:"p-4 text-right"},"Aksi")])],-1)),e("tbody",Ye,[(r(!0),l(d,null,g(D.donations,t=>(r(),l("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",Ze,[v(o(t.name),1),s[9]||(s[9]=e("br",null,null,-1)),e("span",et,o(new Date(t.created_at).toLocaleDateString()),1)]),e("td",tt,o(F(t.amount)),1),e("td",st,[e("button",{onClick:x=>R("/storage/"+t.proof_file),class:"text-blue-600 underline text-xs"},"Lihat Bukti",8,at)]),e("td",ot,[e("span",{class:p(`px-2 py-1 rounded text-xs font-bold ${t.status==="verified"?"bg-green-100 text-green-700":t.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`)},o(t.status==="verified"?"Diterima":t.status==="rejected"?"Ditolak":"Menunggu"),3)]),e("td",rt,[t.status==="pending"?(r(),l("button",{key:0,onClick:x=>C(t.id,"verified"),class:"bg-green-500 text-white p-2 rounded hover:bg-green-600",title:"Terima"},[...s[10]||(s[10]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,lt)):n("",!0),t.status==="pending"?(r(),l("button",{key:1,onClick:x=>C(t.id,"rejected"),class:"bg-red-500 text-white p-2 rounded hover:bg-red-600",title:"Tolak"},[...s[11]||(s[11]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,nt)):n("",!0)])]))),128))])])])])):n("",!0),m.value?(r(),l("div",{key:4,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 p-4",onClick:s[1]||(s[1]=t=>m.value=!1)},[e("img",{src:B.value,class:"max-w-full max-h-[90vh] rounded-lg shadow-2xl"},null,8,it)])):n("",!0)])],64))}};export{ut as default};
